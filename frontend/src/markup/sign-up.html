<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>safe | signup</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="../CSS/sign-up.css" />
  <link rel="stylesheet" href="../CSS/utils.css" />
  <!-- Scripts -->
  <script type="module" src="../scripts/auth.js" defer></script>
  <script type="module" src="../scripts/transistion.js" defer></script>
  <script type="module" src="../scripts/sendUserData.js" defer></script>
  <script type="module" src="../scripts/utils.js" defer></script>
</head>
<body>
  <!-- Add this right after opening <body> tag -->
<div class="progress-container">
  <div class="progress-bar"></div>
  <div class="steps">
    <div class="step active">1</div>
    <div class="step">2</div>
    <div class="step">3</div>
    <div class="step">4</div>
  </div>
</div>

  <main>
    <div class="container">
      <form method="post" id="sign-up-form">
        <h2>Sign up</h2>
        <div class="input-group">
          <label for="username">Username</label>
          <input type="text" name="username" id="username" placeholder=" " required />
        </div>
        <div class="input-group">
          <label for="email">Enter your email</label>
          <input type="email" name="email" id="email" placeholder=" " required />
        </div>
        <div class="input-group">
          <label for="password">Enter your Password</label>
          <input type="password" name="password" id="password" placeholder=" " required />
        </div>
        <button type="submit" id="sign-up-btn">Sign up</button>
        <p>
          Already have an account? <a href="sign-in.html">Sign in</a>
        </p>
      </form>
    </div>
  </main>

  <!-- Templates for multi-step form -->

  <!-- 1. Personal Information -->
  <template data-personal-info="true">
    <div class="container-personal-info">
      <h2>Personal Information</h2>
      <div class="left">
        <div class="input-group">
          <label for="name">Full Name</label>
          <input type="text" name="name" id="name" placeholder=" " required />
        </div>
        <div class="input-group">
          <label for="gender">Gender</label>
          <select name="gender" id="gender" required>
            <option value="">Select Gender</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="others">Others</option>
          </select>
        </div>
        <div class="input-group">
          <label for="height_cm">Height (cm)</label>
          <input type="number" name="height_cm" id="height_cm" placeholder=" " required />
        </div>
      </div>
      <div class="right">
        <div class="input-group">
          <label for="dob">Date of Birth</label>
          <input type="date" name="dob" id="dob" required />
        </div>
        <div class="input-group">
          <label for="blood_type">Blood Type</label>
          <select name="blood_type" id="blood_type" required>
            <option value="">Select Blood Type</option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option>
          </select>
        </div>
        <div class="input-group">
          <label for="weight_kg">Weight (kg)</label>
          <input type="number" name="weight_kg" id="weight_kg" placeholder=" " required />
        </div>
      </div>
      <div class="buttons">
        <!-- No Previous button on the first step -->
        <button data-tooltip="Previous" class="tooltip" style="visibility: hidden;">
          <svg viewBox="0 0 448 512" width="20" height="20">
            <path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/>
          </svg>
        </button>
        <button type="button" data-tooltip="Next" class="tooltip">
          <svg viewBox="0 0 448 512" width="20" height="20">
            <path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/>
          </svg>
        </button>
      </div>
    </div>
  </template>

  <!-- 2. Medical Conditions -->
  <template data-medical-conditions-info="true">
    <div class="container-medical-info">
      <h2>Medical Conditions</h2>
      <div class="content">
        <div class="left">
          <div class="input-group">
            <input type="checkbox" name="diabetes" id="diabetes" />
            <label for="diabetes">Diabetes</label>
          </div>
          <div class="input-group">
            <input type="checkbox" name="heart_disease" id="heart_disease" />
            <label for="heart_disease">Heart Disease</label>
          </div>
          <div class="input-group">
            <input type="checkbox" name="allergies" id="allergies" />
            <label for="allergies">Allergies</label>
          </div>
        </div>
        <div class="right">
          <div class="input-group">
            <input type="checkbox" name="hypertension" id="hypertension" />
            <label for="hypertension">Hypertension</label>
          </div>
          <div class="input-group">
            <input type="checkbox" name="asthma" id="asthma" />
            <label for="asthma">Asthma</label>
          </div>
          <div class="input-group">
            <!-- Rename checkbox to avoid conflict -->
            <!-- <input type="checkbox" name="has_other_conditions" id="has_other_conditions" />
            <label for="has_other_conditions">Other Conditions</label> -->
          </div>
        </div>
      </div>
      <div class="others">
        <label for="other_conditions">If Other, please specify:</label>
        <textarea name="other_conditions" id="other_conditions"></textarea>
      </div>
      <div class="others">
        <label for="medications">Current Medications</label>
        <textarea name="medications" id="medications"></textarea>
      </div>
      <div class="buttons">
        <button data-tooltip="Previous" class="tooltip">
          <svg viewBox="0 0 448 512" width="20" height="20">
            <path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/>
          </svg>
        </button>
        <button type="button" data-tooltip="Next" class="tooltip">
          <p>Next</p>
        </button>
      </div>
    </div>
  </template>

  <!-- 3. Lifestyle -->
  <template data-lifestyle-info="true">
    <div class="container-lifestyle-info">
      <h2>Lifestyle</h2>
      <!-- Each toggle is wrapped in a .wrapper element -->
      <div class="wrapper">
        <div class="input-group">
            <svg viewBox="0 0 640 512" width="30" height="30"><path d="M448 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 11c0 55.2 21.9 108.1 60.9 147.1l21 21c9 9 14.1 21.2 14.1 33.9l0 11c0 17.7 14.3 32 32 32s32-14.3 32-32l0-11c0-29.7-11.8-58.2-32.8-79.2l-21-21C463.2 117.8 448 81.2 448 43l0-11zM576 256c0 17.7 14.3 32 32 32s32-14.3 32-32l0-11c0-55.2-21.9-108.1-60.9-147.1l-21-21c-9-9-14.1-21.2-14.1-33.9l0-11c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 11c0 29.7 11.8 58.2 32.8 79.2l21 21c27 27 42.2 63.6 42.2 101.8l0 11zM229.8 360c-4.7-2.3-10-2.7-15.2-2c-37.8 5.6-75.2 14.3-106.9 22.8C81.3 388 58.3 395.1 42 400.4c-8.2 2.7-14.7 4.9-19.2 6.5c-2.3 .8-4 1.4-5.2 1.8l-1.3 .5C6.8 412.5 0 421.4 0 432s6.8 19.5 16.3 22.7l1.3 .5c1.2 .4 3 1.1 5.2 1.8c4.5 1.6 11 3.8 19.2 6.5c16.3 5.4 39.2 12.5 65.7 19.6C160.3 497.3 228.8 512 288 512l67.3 0c4.1 0 6.3-5.1 3.6-8.3L256.5 380.8c-7.4-8.9-16.5-15.9-26.7-20.8zM445 512l19 0 51.3 0c4.1 0 6.3-5.1 3.6-8.3L416.5 380.8C401.3 362.5 378.8 352 355 352l-19 0-48 0c-1.1 0-2.3 0-3.4 0c-4.1 0-6.2 5.1-3.5 8.3L383.5 483.2C398.7 501.5 421.2 512 445 512zm-3.9-151.7L543.5 483.2c14.6 17.5 35.9 27.9 58.6 28.7c21.1-1.1 37.9-18.6 37.9-39.9l0-80c0-22.1-17.9-40-40-40l-155.3 0c-4.1 0-6.3 5.1-3.6 8.3z"/></svg>          </svg>
          <p>Smoking</p>
          <!-- Hidden checkbox to capture state -->
          <input type="checkbox" name="smoking" id="smoking" style="display:none;" />
        </div>
        <!-- Toggle box -->
        <div class="toggle-box" data-active="false">
          <i class="toggle-icon"></i>
        </div>
      </div>
      <div class="wrapper">
        <div class="input-group">
            <svg viewBox="0 0 576 512" width="30" height="30"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M432 240c53 0 96-43 96-96s-43-96-96-96c-35.5 0-66.6 19.3-83.2 48l-52.6 0C316 40.1 369.3 0 432 0c79.5 0 144 64.5 144 144s-64.5 144-144 144c-27.7 0-53.5-7.8-75.5-21.3l35.4-35.4c12.2 5.6 25.8 8.7 40.1 8.7zM1.8 142.8C5.5 133.8 14.3 128 24 128l368 0c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-177 177L232 464l64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-88 0-88 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-118.1L7 169c-6.9-6.9-8.9-17.2-5.2-26.2z"/></svg>          <p>Alcohol Consumption</p>
          <input type="checkbox" name="alcohol" id="alcohol" style="display:none;" />
        </div>
        <div class="toggle-box" data-active="false">
          <i class="toggle-icon"></i>
        </div>
      </div>
      <div class="wrapper">
        <div class="input-group">
            <svg viewBox="0 0 512 512" width="30" height="30"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M228.3 469.1L47.6 300.4c-4.2-3.9-8.2-8.1-11.9-12.4l87 0c22.6 0 43-13.6 51.7-34.5l10.5-25.2 49.3 109.5c3.8 8.5 12.1 14 21.4 14.1s17.8-5 22-13.3L320 253.7l1.7 3.4c9.5 19 28.9 31 50.1 31l104.5 0c-3.7 4.3-7.7 8.5-11.9 12.4L283.7 469.1c-7.5 7-17.4 10.9-27.7 10.9s-20.2-3.9-27.7-10.9zM503.7 240l-132 0c-3 0-5.8-1.7-7.2-4.4l-23.2-46.3c-4.1-8.1-12.4-13.3-21.5-13.3s-17.4 5.1-21.5 13.3l-41.4 82.8L205.9 158.2c-3.9-8.7-12.7-14.3-22.2-14.1s-18.1 5.9-21.8 14.8l-31.8 76.3c-1.2 3-4.2 4.9-7.4 4.9L16 240c-2.6 0-5 .4-7.3 1.1C3 225.2 0 208.2 0 190.9l0-5.8c0-69.9 50.5-129.5 119.4-141C165 36.5 211.4 51.4 244 84l12 12 12-12c32.6-32.6 79-47.5 124.6-39.9C461.5 55.6 512 115.2 512 185.1l0 5.8c0 16.9-2.8 33.5-8.3 49.1z"/></svg>
          <p>Regular Exercise</p>
          <input type="checkbox" name="exercise" id="exercise" style="display:none;" />
        </div>
        <div class="toggle-box" data-active="false">
          <i class="toggle-icon"></i>
        </div>
      </div>
      <div class="buttons">
        <button data-tooltip="Previous" class="tooltip">
          <svg viewBox="0 0 448 512" width="20" height="20">
            <path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/>
          </svg>
        </button>
        <button type="button" data-tooltip="Next" class="tooltip">
          <p>Next</p>
        </button>
      </div>
    </div>
  </template>

  <!-- 4. Emergency Information -->
  <template data-emergency-info="true">
    <div class="emergency-relationship-info">
      <!-- First emergency contact block -->
      <div class="emergency-contact-block">
        <div class="emergency-items">
          <label for="emergency_full_name">Full Name</label>
          <div>
            <input type="text" name="emergency_full_name" placeholder="Enter your full name" required />
          </div>
        </div>
        <div class="emergency-items">
          <label for="emergency_phone">Phone Number</label>
          <div>
            <input type="text" name="emergency_phone" placeholder="Enter your phone number" required />
          </div>
        </div>
        <div class="emergency-items">
          <label for="relationship">Relationship</label>
          <div>
            <select name="relationship" required>
              <option value="">Select Relationship</option>
              <option value="doctor">Doctor</option>
              <option value="family">Family</option>
              <option value="friend">Friend</option>
            </select>
          </div>
        </div>
        <div class="emergency-items">
          <label for="emergency_email">Email (optional)</label>
          <div>
            <input type="text" name="emergency_email" placeholder="Enter email (optional)" />
          </div>
        </div>
      </div>
  
      <!-- Container where new contacts will be appended -->
      <div id="additional-contacts"></div>
  
      <div class="input-group">
        <button id="add_more_contacts">+ Add more contacts</button>
      </div>
  
      <div class="buttons">
        <button data-tooltip="Previous" class="tooltip">
          <!-- SVG for Previous -->
        </button>
        <button type="submit" data-tooltip="Next" class="tooltip">
          <p>Submit</p>
        </button>
      </div>
    </div>
  </template>
  

  <!-- Global Script for Label Animations and Toggle Behavior -->
  <script>
    "use strict";
    
    // Label animation on focus/blur
    document.querySelectorAll(".input-group input").forEach((input) => {
      input.addEventListener("focus", function () {
        let label = this.previousElementSibling;
        label.style.transform = "translateY(-0.4rem)";
        label.style.fontSize = "0.9rem";
        label.style.color = "rgb(220, 220, 220)";
      });
      input.addEventListener("blur", function () {
        let label = this.previousElementSibling;
        if (this.value.trim() === "") {
          label.style.transform = "translateY(1rem)";
          label.style.fontSize = "1rem";
          label.style.color = "white";
        }
      });
    });
    
    // Global toggle listener
   /*  document.addEventListener("click", (e) => {
      const wrapper = e.target.closest(".wrapper");
      if (wrapper) {
        const toggleBox = wrapper.querySelector(".toggle-box");
        if (toggleBox) {
          changeButtonState({ currentTarget: toggleBox });
          // Update hidden checkbox if present
          const hiddenCheckbox = wrapper.querySelector("input[type='checkbox']");
          if (hiddenCheckbox) {
            hiddenCheckbox.checked = toggleBox.getAttribute("data-active") === "true";
          }
        }
      }
    });
    
    function changeButtonState(event) {
      const buttonBox = event.currentTarget;
      const btn = buttonBox.querySelector(".toggle-icon");
      if (!btn) return;
      
      // Toggle active state
      let state = buttonBox.getAttribute("data-active");
      if (state === "false") {
        btn.style.left = "50%";
        buttonBox.style.background = "blue";
        buttonBox.setAttribute("data-active", "true");
      } else {
        btn.style.left = "15%";
        buttonBox.style.background = "#c0c0c0";
        buttonBox.setAttribute("data-active", "false");
      }
    } */
  </script>
</body>
</html>
